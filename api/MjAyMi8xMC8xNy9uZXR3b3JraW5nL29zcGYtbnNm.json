{"title":"OSPF NSF Introduction","date":"2022-10-16T16:00:00.000Z","date_formatted":{"ll":"Oct 17, 2022","L":"10/17/2022","MM-DD":"10-17"},"link":"2022/10/17/networking/ospf-nsf","tags":["L3","networking","routing","routing protocol"],"categories":["networking"],"updated":"2022-10-17T16:00:00.000Z","content":"<p>OSPF Non-Stop Forwarding / Graceful Restart<br>\nTo avoid routing instability, without causing LSA flood &amp; without neighbor adjacency flap</p>\n<p>Hackmd Slide: <a href=\"https://hackmd.io/@jason19970210-senao/ospf-nsf\" target=\"_blank\">https://hackmd.io/@jason19970210-senao/ospf-nsf</a></p>\n<div class=\"φbq\"><div class=\"φbs\"><table><thead>\n<tr>\n<th style=\"padding:0\"></th>\n<th style=\"padding:0\"></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a href=\"https://www.rfc-editor.org/rfc/rfc3623.html\" target=\"_blank\">RFC 3623</a></td>\n<td>Graceful OSPF Restart</td>\n</tr>\n<tr>\n<td><a href=\"https://www.rfc-editor.org/rfc/rfc5250.html\" target=\"_blank\">RFC 5250</a></td>\n<td>The OSPF Opaque LSA Option</td>\n</tr>\n</tbody>\n</table></div></div><h2 id=\"roles\">roles<a title=\"#roles\" href=\"#roles\"></a></h2>\n<ul>\n<li>restarter</li>\n<li>helper</li>\n</ul>\n<h2 id=\"packet\">packet<a title=\"#packet\" href=\"#packet\"></a></h2>\n<ul>\n<li>opaque LSAs / Grace-LSAs\n<ul>\n<li>scope: <code>Link-Local</code> scope (LSA Type 9), only need to be seen by neighbors direct connect to restarter</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"grace-lsa-format\">grace-LSA format<a title=\"#grace-lsa-format\" href=\"#grace-lsa-format\"></a></h3>\n<p>ref: <a href=\"https://www.rfc-editor.org/rfc/rfc3623.html#page-13\" target=\"_blank\">https://www.rfc-editor.org/rfc/rfc3623.html#page-13</a></p>\n<blockquote>\n<p>The grace-LSA is a link-local scoped Opaque-LSA <a href=\"https://www.rfc-editor.org/rfc/rfc2370\" target=\"_blank\">(RFC 2370)</a>, having an Opaque Type of 3 and an Opaque ID as 0.</p>\n</blockquote>\n<p>LSA:  link state advertisements</p>\n<ul>\n<li>LSA type: 9, 10, 11</li>\n<li>opaque type: 3 <a href=\"https://www.iana.org/assignments/ospf-opaque-types/ospf-opaque-types.xhtml#table-ospf-opaque-types-2\" target=\"_blank\">(ref)</a></li>\n<li>LS Age field set to 0 when LSA is first originated\n<ul>\n<li>the current value of LS age then indicates how long the restarter made its request</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"grace-lsa-body:-tlv-encoded\">grace-LSA body: TLV-encoded<a title=\"#grace-lsa-body:-tlv-encoded\" href=\"#grace-lsa-body:-tlv-encoded\"></a></h3>\n<blockquote>\n<p>The format of the TLVs within the body of grace-LSA is the same as the format used by TE (Traffic Engineering extensions) to OSPF</p>\n</blockquote>\n<ul>\n<li>Grace Period (Required)</li>\n<li>Graceful Restart Reason (Required, default: 0 -&gt; <code>Unknown</code>)</li>\n<li>IP Interface Address</li>\n<li>DoNotAge: never set in a grace-LSA</li>\n</ul>\n<hr>\n<p>ref: <a href=\"http://www.h3c.com/cn/d_200811/618963_30003_0.htm\" target=\"_blank\">http://www.h3c.com/cn/d_200811/618963_30003_0.htm</a><br>\nref: <a href=\"https://networklessons.com/cisco/ccie-routing-switching-written/ospf-graceful-restart\" target=\"_blank\">https://networklessons.com/cisco/ccie-routing-switching-written/ospf-graceful-restart</a></p>\n<p>RFC 2328：OSPF Version 2<br>\nRFC 3623：Graceful OSPF Restart<br>\nRFC 4811：OSPF Out-of-Band LSDB Resynchronization<br>\nRFC 4812：OSPF Restart Signaling<br>\nRFC 4813：OSPF Link-Local Signaling</p>\n","prev":{"title":"Hexo & Inside","link":"2022/10/17/blog/hexo-&-inside"},"next":{"title":"RIPng Introduction","link":"2022/10/17/networking/ripng-introduction"},"plink":"https://jason19970210.github.io/2022/10/17/networking/ospf-nsf/","toc":[{"id":"roles","title":"roles","index":"1"},{"id":"packet","title":"packet","index":"2","children":[{"id":"grace-lsa-format","title":"grace-LSA format","index":"2.1"},{"id":"grace-lsa-body:-tlv-encoded","title":"grace-LSA body: TLV-encoded","index":"2.2"}]}],"reading_time":"242 words in 2 min"}